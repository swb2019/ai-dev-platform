# Risk Register

Track recurring hazards here so autonomous runs avoid unnecessary stops. Update entries when mitigations change or new risks surface.

| ID    | Risk                                                                   | Impact                                          | Likelihood | Mitigation / Playbook                                                                                                                                                                    |
| ----- | ---------------------------------------------------------------------- | ----------------------------------------------- | ---------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| R-001 | Missing GCP credentials when running Terraform or container pushes     | Blocks infrastructure plans or image publishing | Medium     | Use Terraform in `-plan` mode locally. Rely on CI for applies unless credentials are provisioned. For local testing, export short-lived WIF tokens and document steps in `infra/README`. |
| R-002 | Playwright failing due to absent system deps, browsers, or cache space | Test suite halts                                | Medium     | Run `pnpm --filter @ai-dev-platform/web exec playwright install --with-deps` once per environment. Ensure `.tmp/` has space (script sets `TMPDIR`); clean old recordings if cache grows. |
| R-003 | Binary Authorization rejecting unsigned images in Autopilot            | Deployment failures                             | Low        | Ensure CI pipelines complete signing (Cosign) before deploying. Never disable admission policies; update Kustomize overlays with signed digest references only.                          |
| R-004 | Semgrep/Gitleaks false positives                                       | Blocks CI merge                                 | Medium     | Investigate the finding, suppress with inline allow comments only when justification is documented in PR and `docs/SECURITY.md`. Prefer code changes that eliminate the issue.           |
| R-005 | Long-running Next.js type checks in CI                                 | Slower feedback loops                           | Medium     | Use `pnpm type-check --filter` for targeted runs during iteration; rely on `./scripts/test-suite.sh` before PR.                                                                          |
| R-006 | Terraform state drift across environments                              | Risk of overwriting production resources        | Low        | Always run `terraform plan` with explicit `-var-file`. Record plan output in PR discussion. Use workspaces or backend locking if multiple agents collaborate.                            |
| R-007 | Feature data divergence between fixtures and UI constants              | Tests passing but UI stale                      | Medium     | Source canonical marketing copy from `fixtures/web/feature-cards.json`; import fixture data in UI and tests to eliminate duplication.                                                    |
| R-008 | Git drift when multiple agents iterate concurrently                    | Merge conflicts and lost work                   | Medium     | Run `./scripts/git-sync-check.sh` before and after major changes. Rebase onto `main` promptly and document conflicts in task context.                                                    |
